<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <div id="container" class="gameplay_screen"></div>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v4.3.0-beta2.js"></script>
	 <link rel="stylesheet" href="css/stylesheet.css"/>
    <script>
	
	
	
	

      var stage = new Kinetic.Stage({
        container: 'container',
        width: 800,
        height: 480
      });
      var layer = new Kinetic.Layer();
	  var layer2 = new Kinetic.Layer();

	 

      var imageObj = new Image();
	  
	  
	  
      imageObj.onload = function() {
        zombie_mouth = new Kinetic.Image({
          x: 180,
          y: stage.getHeight() / 2 - 59,
          image: imageObj,
          width: 106,
          height: 118,
		  draggable: true,
		  
		  dragBoundFunc: function(pos) {
			  return {
				x: this.getAbsolutePosition().x,
				y: pos.y
			  }
		  }
		  
		  
        });

        // add the shape to the layer
        layer.add(zombie_mouth);


        // add the layer to the stage
        stage.add(layer);
		
		
	 

		
      };
      imageObj.src = 'candy2.png';

	  
		
		
		var hexagon = new Kinetic.Rect({
        x: stage.getWidth() / 2,
        y: stage.getHeight() / 2,
		width:100,
		height:100,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4
      });

      layer.add(hexagon);
     

      var amplitude = 150;
      var period = 2000;
      // in ms
      var centerX = stage.getWidth() / 2;

      var anim = new Kinetic.Animation(function(frame) {
        hexagon.setX(amplitude * Math.sin(frame.time * 2 * Math.PI / period) + centerX);
      }, layer);

      anim.start();
		
		
	  
	   function collides(a, b) {
          return a.x < b.x + b.width &&
            a.x + a.width > b.x &&
            a.y < b.y + b.height &&
            a.y + a.height > b.y;
        }
		
		
		 function handleCollisions() {   
 
            if(collides(hexagon, zombie_mouth)){
			  console.log("kurwa");
            }
		}
		
	/*	
		 var brains = [];
        
        function Brain(I) {
          I = I || {};
        
          I.active = true;
          I.age = Math.floor(Math.random() * 32);
          
          I.color = "#A2B";
    
          I.x = 400;
          I.y = 87;
          I.xVelocity = -(Math.floor(Math.random() * (5 - 2 + 1)) + 2);


          I.yVelocity = 0;
        
          I.width = 50;
          I.height = 38;
        
          I.inBounds = function() {
            return I.x >= 0 && I.x <= canvas_width &&
              I.y >= 0 && I.y <= canvas_height;
          };
        
          I.sprite = Sprite("brain2");
        
          I.draw = function() {
		  
              candy = new Kinetic.Image({
			  x: this.x,
			  y: this.y,
			  image: imageObj,
			  width: 106,
			  height: 118
			});
			layer.add(candy);
          };
        
          I.update = function() {
            I.x += I.xVelocity;
            I.y += I.yVelocity;
        
            I.yVelocity = -2.5 * Math.sin(I.age * Math.PI / 50);
        
            I.age++;
        
            I.active = I.active && I.inBounds();
          };
        
          I.explode = function() {
           
            this.active = false;
    
          };
        
          return I;
        };
		
		
		 function draw() {
  
		  
          brains.forEach(function(brain) {
            brain.draw();
          });
		

        }
		
		   function update() {
    
          brains.forEach(function(brain) {
            brain.update();
          });
	
		} */
		
		 window.requestAnimFrame = (function(){
				return  window.requestAnimationFrame       || 
              window.webkitRequestAnimationFrame || 
              window.mozRequestAnimationFrame    || 
              window.oRequestAnimationFrame      || 
              window.msRequestAnimationFrame     || 
              function( callback ){
                window.setTimeout(callback, 1000 / 30);
              };
			})();
		
		
			(function animloop(){

				handleCollisions();
				requestAnimFrame(animloop);
			})();
	
	
    </script>
  </body>
</html>